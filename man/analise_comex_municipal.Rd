% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analise_comex_municipal.R
\name{analise_comex_municipal}
\alias{analise_comex_municipal}
\title{Análise de Dados de Comércio Exterior Municipal}
\usage{
analise_comex_municipal(
  tipo = "exportacao",
  anos = 2024,
  sh2 = NULL,
  sh4 = NULL,
  co_pais = NULL,
  sg_uf_mun = NULL,
  co_mun = NULL,
  agregar_por = NULL,
  metricas = c("VL_FOB", "KG_LIQUIDO"),
  force_download = FALSE
)
}
\arguments{
\item{tipo}{Caractere. O tipo de operação comercial: "exportacao" ou "importacao".}

\item{anos}{Vetor numérico. Os anos dos dados a serem processados (ex: 2024 ou c(2023, 2024)).}

\item{sh2}{Vetor numérico. Códigos SH2 para filtrar (derivado de SH4 nos dados municipais).}

\item{sh4}{Vetor numérico. Códigos SH4 para filtrar.}

\item{co_pais}{Vetor numérico. Códigos de países para filtrar.}

\item{sg_uf_mun}{Vetor de caracteres. Siglas das UFs da empresa para filtrar (SG_UF_MUN).}

\item{co_mun}{Vetor numérico. Códigos dos municípios da empresa para filtrar.}

\item{agregar_por}{Vetor de caracteres. Colunas adicionais para agrupar os resultados
(ex: c("CO_ANO", "SG_UF_MUN", "CO_MES")).}

\item{metricas}{Vetor de caracteres. As métricas a serem calculadas e somadas.
Métricas disponíveis para dados municipais: "VL_FOB" e "KG_LIQUIDO".
Outras métricas serão ignoradas com um aviso.}

\item{force_download}{Lógico. Se TRUE, força o download dos dados, ignorando o cache.
Padrão é FALSE.}
}
\value{
Um data.frame (tibble) com os dados agregados de comércio exterior municipal.
Inclui a coluna \code{N_MUNICIPIOS} se a agregação não for por \code{CO_MUN}.
Retorna um data.frame vazio se nenhum registro for encontrado após os filtros.
}
\description{
Esta função permite analisar dados de comércio exterior (exportação ou importação)
a nível municipal (município da empresa), filtrando por ano, produtos (SH2, SH4),
países, UFs da empresa e municípios da empresa. Os dados são baixados e cacheados localmente.
}
\examples{
\dontrun{
# Exemplo 1: Exportações municipais básicas por SH4 em 2024, agrupado por UF
# resultado1 <- analise_comex_municipal(
#   tipo = "exportacao",
#   anos = 2024,
#   sh4 = c(9011, 9012),
#   agregar_por = "SG_UF_MUN"
# )
# print(head(resultado1))

# Exemplo 2: Análise multi-anual de importações por município para SH2 = 85
# imp_mun_maquinas <- analise_comex_municipal(
#   tipo = "importacao",
#   anos = c(2023, 2024),
#   sh2 = 85,
#   co_mun = c(3550308), # Exemplo: São Paulo
#   agregar_por = c("CO_ANO", "CO_MES")
# )
# print(head(imp_mun_maquinas))
}
}
